delimiter #
create function vacant_boarding_gate (date_d datetime, airlineid int)
returns ans varchar(15)
BEGIN
	declare a varchar(2);
	declare result varchar(25);
	DECLARE cur1 CURSOR FOR select id from boarding_gates where id not in (select boarding_gate from schedule where date_d>date_add(departure,interval -2 hour) and date_d<date_add(departure,interval 2 hour) and airline_id=airlineid) ;
	result:='';
	OPEN cur1;
	read_loop: LOOP
    FETCH cur1 INTO a;
    IF done THEN
      LEAVE read_loop;
    END IF;
    result:=select concat(result,',',a); 
    end loop;
     CLOSE cur1;
     end#
